<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Modelo 3D: Inercia</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      body {
        font-family: sans-serif;
        text-align: center;
        padding: 20px;
        background: #f4f4f4;
      }
      model-viewer {
        width: 100%;
        max-width: 600px;
        height: 400px;
        margin: 20px auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }
      a.boton {
        display: inline-block;
        margin-top: 20px;
        padding: 12px 24px;
        background: #4caf50;
        color: white;
        text-decoration: none;
        font-weight: bold;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <h1>Modelo 3D: Depósito de inercia</h1>

    <model-viewer
      src="https://mel142.github.io/inercia.glb"
      ios-src="https://mel142.github.io/inercia.usdz"
      alt="Depósito de inercia"
      auto-rotate
      camera-controls
      ar
      ar-modes="scene-viewer webxr quick-look"
    ></model-viewer>

    <!-- Botón único para AR: se asignará el enlace según el SO -->
    <a id="boton-ar" class="boton" href="#">
      Ver en realidad aumentada
    </a>

    <script>
      const botonAR = document.getElementById("boton-ar");
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      const isAndroid = /Android/i.test(userAgent);
      const isIOS = /iPhone|iPad|iPod/i.test(userAgent);

      if (isAndroid) {
        // Enlace para Android: utiliza intent:// para Scene Viewer
        botonAR.href =
          "intent://arvr.google.com/scene-viewer/1.0?file=https://mel142.github.io/inercia.glb&mode=ar_only#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=https://mel142.github.io;end;";
      } else if (isIOS) {
        // Enlace para iOS: utiliza AR Quick Look con el atributo rel="ar"
        botonAR.href = "https://mel142.github.io/inercia.usdz";
        botonAR.setAttribute("rel", "ar");
      } else {
        // Si no es Android ni iOS, se asigna un enlace de fallback (por ejemplo, muestra la versión 3D en el navegador)
        botonAR.href = "https://mel142.github.io/inercia.glb";
      }
    </script>
  </body>
</html>
