<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Comparador de modelos 3D</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
        background: #f4f4f4;
        text-align: center;
      }

      .modelos {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
      }

      .modelo {
        max-width: 300px;
      }

      model-viewer {
        width: 100%;
        height: 400px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      a.boton {
        display: inline-block;
        margin-top: 10px;
        padding: 10px 20px;
        background: #4caf50;
        color: white;
        text-decoration: none;
        font-weight: bold;
        border-radius: 8px;
      }

      h2 {
        margin-top: 10px;
        font-size: 18px;
      }
    </style>
  </head>
  <body>
    <h1>Comparador de modelos 3D</h1>

    <div class="modelos">
      <!-- Unidad exterior -->
      <div class="modelo">
        <h2>Unidad exterior</h2>
        <model-viewer
          id="mv-ue"
          src="https://mel142.github.io/unidad_exterior.glb"
          ios-src="https://mel142.github.io/unidad_exterior.usdz"
          alt="Unidad exterior"
          auto-rotate
          camera-controls
          ar
          ar-modes="scene-viewer webxr quick-look"
        ></model-viewer>
        <a id="ar-ue" class="boton" href="#">Ver en realidad aumentada</a>
      </div>

      <!-- Interacumulador -->
      <div class="modelo">
        <h2>Interacumulador</h2>
        <model-viewer
          id="mv-int"
          src="https://mel142.github.io/interacumulador.glb"
          ios-src="https://mel142.github.io/interacumulador.usdz"
          alt="Interacumulador"
          auto-rotate
          camera-controls
          ar
          ar-modes="scene-viewer webxr quick-look"
        ></model-viewer>
        <a id="ar-int" class="boton" href="#">Ver en realidad aumentada</a>
      </div>
    </div>

    <script>
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      const isAndroid = /Android/i.test(userAgent);
      const isIOS = /iPhone|iPad|iPod/i.test(userAgent);

      function setARButton(buttonId, glbURL, usdzURL) {
        const button = document.getElementById(buttonId);
        if (isAndroid) {
          button.href = `intent://arvr.google.com/scene-viewer/1.0?file=${glbURL}&mode=ar_only#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${glbURL};end;`;
          button.removeAttribute("rel");
        } else if (isIOS) {
          button.href = usdzURL;
          button.setAttribute("rel", "ar");
        } else {
          button.href = glbURL;
          button.removeAttribute("rel");
        }
      }

      setARButton(
        "ar-ue",
        "https://mel142.github.io/unidad_exterior.glb",
        "https://mel142.github.io/unidad_exterior.usdz"
      );
      setARButton(
        "ar-int",
        "https://mel142.github.io/interacumulador.glb",
        "https://mel142.github.io/interacumulador.usdz"
      );
    </script>
  </body>
</html>
